{"version":3,"sources":["services/phonebook.jsx","components/Numbers.jsx","components/Filter.jsx","components/PersonForm.jsx","components/Notification.jsx","App.jsx","index.jsx"],"names":["baseUrl","phonebook","axios","get","then","response","data","person","post","id","delete","concat","put","Numbers","_ref","contacts","filteredPersons","setFilteredPersons","newFilter","setContacts","console","log","deleteContact","window","confirm","name","filter","contact","length","catch","names","map","react_default","a","createElement","key","number","onClick","filtered","result","Filter","setNewFilter","persons","value","onChange","event","target","filterWord","toLowerCase","includes","PersonForm","addPerson","newName","setNewName","newNumber","setNewNumber","onSubmit","type","successStyle","color","backgroundColor","margin","marginRight","padding","borderRadius","errorStyle","Notification","message","className","style","isSuccess","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","_useState11","_useState12","infoBox","setInfoBox","useEffect","components_Filter","components_Notification","components_PersonForm","preventDefault","allNames","updateFilterForNewNumber","error","status","isSucess","setTimeout","updateFilter","fixContact","alert","components_Numbers","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.fc694078.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl).then(response => response.data);\r\n};\r\n\r\nconst add = person => {\r\n    return axios.post(baseUrl, person).then(response => response.data);\r\n};\r\n\r\nconst deleteContact = id => {\r\n    return axios.delete(baseUrl + `/${id}`);\r\n};\r\n\r\nconst updateContact = person => {\r\n    return axios\r\n        .put(baseUrl + `/${person.id}`, person)\r\n        .then(response => response.data);\r\n};\r\n\r\nexport default { getAll, add, deleteContact, updateContact };\r\n","import React from \"react\";\r\nimport phonebook from \"../services/phonebook\";\r\n\r\nconst Numbers = ({\r\n    contacts,\r\n    filteredPersons,\r\n    setFilteredPersons,\r\n    newFilter,\r\n    setContacts\r\n}) => {\r\n    // TODO: REMOVE\r\n    console.log({ contacts });\r\n\r\n    const deleteContact = person => () => {\r\n        if (window.confirm(`Delete ${person.name}?`)) {\r\n            phonebook\r\n                .deleteContact(person.id)\r\n                .then(() => {\r\n                    // update contacts\r\n                    setContacts(\r\n                        contacts.filter(contact => contact.id !== person.id)\r\n                    );\r\n\r\n                    // update filter if search is active\r\n                    if (filteredPersons.length > 0) {\r\n                        setFilteredPersons(\r\n                            filteredPersons.filter(\r\n                                contact => contact.id !== person.id\r\n                            )\r\n                        );\r\n                    }\r\n                })\r\n                .catch(`Could not delete ${person}`);\r\n        }\r\n    };\r\n\r\n    // create HTML for all contacts\r\n    const names = contacts.map(person => (\r\n        <div key={person.name}>\r\n            {person.name} {person.number}{\" \"}\r\n            <button onClick={deleteContact(person)}>delete</button>\r\n        </div>\r\n    ));\r\n\r\n    // create HTML for filtered\r\n    const filtered = filteredPersons.map(person => (\r\n        <div key={person.name}>\r\n            {person.name} {person.number}{\" \"}\r\n            <button onClick={deleteContact(person)}>delete</button>\r\n        </div>\r\n    ));\r\n\r\n    // show filtered result or all names if no filter active\r\n    let result =\r\n        (newFilter.length > 0 && filteredPersons.length > 0) ||\r\n        !(filteredPersons.length === 0 && newFilter.length === 0);\r\n\r\n    return <div>{result ? filtered : names}</div>;\r\n};\r\n\r\nexport default Numbers;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ newFilter, setNewFilter, setFilteredPersons, persons }) => {\r\n    const handleFilterChange = event => {\r\n        // update filter value\r\n        setNewFilter(event.target.value);\r\n        let filterWord = event.target.value;\r\n\r\n        // sort out people who matches filter\r\n        const filtered = persons.filter(person =>\r\n            person.name.toLowerCase().includes(filterWord.toLowerCase())\r\n        );\r\n\r\n        // update filtered state\r\n        setFilteredPersons(filtered);\r\n\r\n    };\r\n    return (\r\n        <div>\r\n            filter shown with:\r\n            <input value={newFilter} onChange={handleFilterChange} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n    addPerson,\r\n    newName,\r\n    setNewName,\r\n    newNumber,\r\n    setNewNumber\r\n}) => {\r\n    const handleNameChange = event => setNewName(event.target.value);\r\n    const handleNumberChange = event => setNewNumber(event.target.value);\r\n\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNameChange} />\r\n            </div>\r\n            <div>\r\n                number:\r\n                <input value={newNumber} onChange={handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst successStyle = {\r\n    color: \"#270\",\r\n    backgroundColor: \"#dff2bf\",\r\n    margin: \"10px 0\",\r\n    marginRight: \"75%\",\r\n    padding: \"10px\",\r\n    borderRadius: \"3px 3px 3px 3px\"\r\n};\r\n\r\nconst errorStyle = {\r\n    color: \"#D8000C\",\r\n    backgroundColor: \"#FFBABA\",\r\n    margin: \"10px 0\",\r\n    marginRight: \"75%\",\r\n    padding: \"10px\",\r\n    borderRadius: \"3px 3px 3px 3px\"\r\n};\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message.message === null) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"success\"\r\n            style={message.isSuccess ? successStyle : errorStyle}\r\n        >\r\n            {message.message}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport phonebook from \"./services/phonebook\";\r\nimport Numbers from \"./components/Numbers\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([]);\r\n    const [newName, setNewName] = useState(\"\");\r\n    const [newNumber, setNewNumber] = useState(\"\");\r\n    const [newFilter, setNewFilter] = useState(\"\");\r\n    const [filteredPersons, setFilteredPersons] = useState([]);\r\n    const [infoBox, setInfoBox] = useState({ message: null, isSuccess: true });\r\n\r\n    // effect hook for json server\r\n    useEffect(() => {\r\n        phonebook.getAll().then(phonebook => {\r\n            setPersons(phonebook);\r\n        });\r\n    }, []);\r\n\r\n    // update the contact and forms locally\r\n    const fixContact = contact => {\r\n        setPersons(persons.concat(contact));\r\n    };\r\n\r\n    // update the filter with new addition\r\n    const updateFilter = contact => {\r\n        if (filteredPersons.length > 0) {\r\n            setFilteredPersons(filteredPersons.concat(contact));\r\n        }\r\n    };\r\n\r\n    // update filter with changing number\r\n    const updateFilterForNewNumber = contact => {\r\n        setFilteredPersons(\r\n            filteredPersons.map(person =>\r\n                person.id === contact.id ? contact : person\r\n            )\r\n        );\r\n    };\r\n\r\n    // add person on click\r\n    const addPerson = event => {\r\n        event.preventDefault();\r\n        const allNames = persons.map(person => person.name);\r\n\r\n        // create contact\r\n        const contact = {\r\n            name: newName,\r\n            number: newNumber,\r\n            id: persons.length + 1\r\n        };\r\n\r\n        // if duplicate, update number\r\n        if (allNames.includes(newName)) {\r\n            if (\r\n                window.confirm(\r\n                    `${newName} is already added to the phonebook, would you like to update the number?`\r\n                )\r\n            ) {\r\n                // change the ID of contact to the ID of the person who should be changed\r\n                contact.id = persons.filter(\r\n                    person => person.name === contact.name\r\n                )[0].id;\r\n\r\n                // update filtered results\r\n                updateFilterForNewNumber(contact);\r\n\r\n                // add to phonebook\r\n                phonebook\r\n                    .updateContact(contact)\r\n                    .then(() =>\r\n                        setPersons(\r\n                            persons.map(person =>\r\n                                person.id === contact.id ? contact : person\r\n                            )\r\n                        )\r\n                    )\r\n                    .catch(error => {\r\n                        if (error.response.status === 404) {\r\n                            setInfoBox({\r\n                                message: `Information of ${\r\n                                    contact.name\r\n                                } has already been removed from the server.`,\r\n                                isSucess: false\r\n                            });\r\n                            setTimeout(\r\n                                () =>\r\n                                    setInfoBox({\r\n                                        message: null,\r\n                                        isSuccess: false\r\n                                    }),\r\n                                5000\r\n                            );\r\n                        } else {\r\n                            setInfoBox({\r\n                                message: `Could not update number`,\r\n                                isSucess: false\r\n                            });\r\n                            setTimeout(\r\n                                () =>\r\n                                    setInfoBox({\r\n                                        message: null,\r\n                                        isSuccess: false\r\n                                    }),\r\n                                5000\r\n                            );\r\n                        }\r\n                    });\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Warning if empty\r\n        if (newName === \"\") {\r\n            alert(`You cannot add an empty string`);\r\n            return;\r\n        }\r\n\r\n        // update filter if search is active\r\n        updateFilter(contact);\r\n\r\n        // reset forms\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n\r\n        // add to backend server and to webpage\r\n        phonebook\r\n            .add(contact)\r\n            .then(contact => {\r\n                fixContact(contact);\r\n                setInfoBox({\r\n                    message: `Successfully added ${newName}`,\r\n                    isSuccess: true\r\n                });\r\n                setTimeout(\r\n                    () => setInfoBox({ message: null, isSuccess: false }),\r\n                    5000\r\n                );\r\n            })\r\n            .catch(error => {\r\n                alert(`Could not add ${contact.name}`);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Phonebook</h1>\r\n            <Filter\r\n                value={newFilter}\r\n                setNewFilter={setNewFilter}\r\n                setFilteredPersons={setFilteredPersons}\r\n                persons={persons}\r\n            />\r\n\r\n            <h2>Add a new contact</h2>\r\n            <Notification message={infoBox} />\r\n            <PersonForm\r\n                addPerson={addPerson}\r\n                newName={newName}\r\n                setNewName={setNewName}\r\n                newNumber={newNumber}\r\n                setNewNumber={setNewNumber}\r\n            />\r\n            <h2>Numbers</h2>\r\n            <Numbers\r\n                contacts={persons}\r\n                filteredPersons={filteredPersons}\r\n                setFilteredPersons={setFilteredPersons}\r\n                newFilter={newFilter}\r\n                setContacts={setPersons}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}